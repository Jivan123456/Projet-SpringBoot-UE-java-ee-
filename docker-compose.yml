version: '3.8'

services:
  # Base de données MySQL
  mysql:
    image: mysql:8.0
    container_name: mysql_db
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: Database1
      MYSQL_USER: jivan
      MYSQL_PASSWORD: 1234
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql

      - ./scripts:/docker-entrypoint-initdb.d
    networks:
      - db_network

  # phpMyAdmin - Interface web pour MySQL
  phpmyadmin:
    image: phpmyadmin:latest
    container_name: phpmyadmin
    environment:
      PMA_HOST: mysql
      PMA_PORT: 3306
      PMA_USER: jivan
      PMA_PASSWORD: 1234
      MYSQL_ROOT_PASSWORD: rootpassword
    ports:
      - "8080:80"
    depends_on:
      - mysql
    networks:
      - db_network

  # Alternative: Base de données PostgreSQL
  # postgres:
  #   image: postgres:15
  #   container_name: postgres_db
  #   environment:
  #     POSTGRES_DB: mydb
  #     POSTGRES_USER: user
  #     POSTGRES_PASSWORD: password
  #   ports:
  #     - "5432:5432"
  #   volumes:
  #     - postgres_data:/var/lib/postgresql/data
  #     # - ./scripts:/docker-entrypoint-initdb.d
  #   networks:
  #     - db_network

  # Alternative: Base de données MariaDB
  # mariadb:
  #   image: mariadb:10.11
  #   container_name: mariadb_db
  #   environment:
  #     MYSQL_ROOT_PASSWORD: rootpassword
  #     MYSQL_DATABASE: mydb
  #     MYSQL_USER: user
  #     MYSQL_PASSWORD: password
  #   ports:
  #     - "3307:3306"
  #   volumes:
  #     - mariadb_data:/var/lib/mysql
  #   networks:
  #     - db_network

volumes:
  mysql_data:
  # postgres_data:
  # mariadb_data:

networks:
  db_network:
    driver: bridge
